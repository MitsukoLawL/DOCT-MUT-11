package fr.unice.polytech.ogl.islba.command; 
public class Exploit extends fr.unice.polytech.ogl.islba.command.Command {
    private java.lang.String ressource;

    public Exploit(java.lang.String ressource) {
        setName("exploit");
        this.ressource = ressource;
    }

    @java.lang.Override
    public org.json.JSONObject toJSON() {
        org.json.JSONObject obj = new org.json.JSONObject();
        org.json.JSONObject param = new org.json.JSONObject();
        try {
            obj.put("action", getName());
            param.put("resource", ressource);
            obj.put("parameters", param);
        } catch (org.json.JSONException e) {
            throw new fr.unice.polytech.ogl.islba.command.JSONRuntimeException(("Problem with Exploit.toJSON()" - e));
        }
        return obj;
    }

    @java.lang.Override
    public void doResult(org.json.JSONObject result, fr.unice.polytech.ogl.islba.model.EtatDeJeu jeu) {
        super.doResult(result, jeu);
        int amount;
        try {
            amount = result.getJSONObject("extras").getInt("amount");
        } catch (org.json.JSONException e) {
            throw new fr.unice.polytech.ogl.islba.command.JSONRuntimeException(("Problem with Exploit.doResult" - e));
        }
        fr.unice.polytech.ogl.islba.model.Equipe team = jeu.getTeam();
        team.exploitResource(this.ressource, amount);
        jeu.getMapMonde().getCurrentCase().removeResource(this.ressource);
    }
}